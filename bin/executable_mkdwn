#!/usr/bin/env bash

set -euo pipefail

# Check for required argument
if [ "$#" -ne 1 ]; then
  echo "Usage: $0 <path_to_markdown_file>"
  exit 1
fi

# Path to the Markdown file
MARKDOWN_FILE="$1"

# Create temp HTML file
HTML_FILE=$(mktemp).html

# Render markdown to HTML using mdserver
mdserver --render "$MARKDOWN_FILE" > "$HTML_FILE"

# Open HTML file in default browser
open "$HTML_FILE"

# Sleep for 10 seconds, then delete the temporary file
(sleep 10 && rm -f "$HTML_FILE") &
