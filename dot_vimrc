set nocompatible
filetype off

" fuzzy finder
set rtp+=$FZF_HOME

set runtimepath+=~/.vim/bundle/Vundle.vim
call vundle#begin()


"Let vundle manage vundle
Plugin 'VundleVim/Vundle.vim'

"My Plugins here
Plugin 'airblade/vim-gitgutter'
Plugin 'blueyed/vim-diminactive'
Plugin 'editorconfig/editorconfig-vim'
Plugin 'jeffkreeftmeijer/vim-numbertoggle'
Plugin 'junegunn/fzf.vim'
Plugin 'mhinz/vim-startify'
Plugin 'mileszs/ack.vim'
Plugin 'morhetz/gruvbox'
Plugin 'tpope/vim-commentary'
Plugin 'tpope/vim-surround'
Plugin 'tpope/vim-unimpaired'
Plugin 'vim-airline/vim-airline'

if executable('ag')
  let g:ackprg = 'ag --vimgrep'
endif

" All of your Plugins must be added before the following line
call vundle#end() 

" Set leader shortcut to a comma ','. By default it's the backslash
let mapleader = " "

""""""""""""""""""""""
"      Settings      "
""""""""""""""""""""""
set nocompatible                " Enables us Vim specific features
filetype off                    " Reset filetype detection first ...
filetype plugin indent on       " ... and enable filetype detection
if has("nvim") == 0
	set ttyfast                     " Indicate fast terminal conn for faster redraw
	set ttymouse=xterm2             " Indicate terminal type for mouse codes
	set ttyscroll=3                 " Speedup scrolling
endif
set laststatus=2                " Show status line always
set encoding=utf-8              " Set default encoding to UTF-8
set autoread                    " Automatically read changed files
set autoindent                  " Enabile Autoindent
set backspace=indent,eol,start  " Makes backspace key more powerful.
set incsearch                   " Shows the match while typing
set hlsearch                    " Highlight found searches
set noerrorbells                " No beeps
set number relativenumber       " Show line numbers
set showcmd                     " Show me what I'm typing
set noswapfile                  " Don't use swapfile
set nobackup                    " Don't create annoying backup files
set splitright                  " Vertical windows should be split to right
set splitbelow                  " Horizontal windows should split to bottom
set autowrite                   " Automatically save before :next, :make etc.
set hidden                      " Buffer should still exist if window is closed
set fileformats=unix,dos,mac    " Prefer Unix over Windows over OS 9 formats
set noshowmatch                 " Do not show matching brackets by flickering
set noshowmode                  " We show the mode with airline or lightline
set ignorecase                  " Search case insensitive...
set smartcase                   " ... but not it begins with upper case
set completeopt=menu,menuone    " Show popup menu, even if there is one entry
set pumheight=10                " Completion window max size
set nocursorcolumn              " Do not highlight column (speeds up highlighting)
set nocursorline                " Do not highlight cursor (speeds up highlighting)
set lazyredraw                  " Wait to redraw

" This enables us to undo files even if you exit Vim.
if has('persistent_undo')
  set undofile
  set undodir=~/.config/vim/tmp/undo//
endif

" Colorscheme
syntax enable
set background=dark
let g:solarized_termtrans = 1
let g:solarized_termcolors=256

try
  colorscheme gruvbox
  catch
endtry

"  """"""""""""""""""""""
"  Mappings      "
"  """"""""""""""""""""""

" jj to exit insert mode
imap jj <Esc>

"<C-s> to save
noremap <silent> <C-s> :update<CR>
vnoremap <silent> <C-s> <C-C>:update<CR>
inoremap <silent> <C-s> <C-O>:update<CR>

" <C-l> to clear search highlights
map <leader>l :nohlsearch<CR>

",q to quit buffer
map <leader>q :q<CR>

"split motions to simple <C-h|j|k|l>
map <C-j> <C-w>j
map <C-k> <C-w>k
map <C-h> <C-w>h
map <C-l> <C-w>l

"highlight active split by enabling syntax higlighting
let g:diminactive_use_syntax = 0
let g:diminactive_use_colorcolumn = 1

" Jump to next error with Ctrl-n and previous error with Ctrl-m. Close the
" quickfix window with <leader>a
" How does the <C-m> mapping break my q: window?????
" noremap <C-n> :cnext<CR>
" noremap <C-m> :cprevious<CR>
" nnoremap <leader>a :cclose<CR>

""Visual linewise up and down by default (and use gj gk to go quicker)
noremap <Up> gk
noremap <Down> gj
noremap j gj
noremap k gk

"" Search mappings: These will make it so that going to the next one in a
"" search will center on the line it's found in.
nnoremap n nzzzv
nnoremap N Nzzzv

" Act like D and C
nnoremap Y y$

" Enter automatically into the files directory
autocmd BufEnter * silent! lcd %:p:h

"set symbols for tabs and EOL
set listchars=tab:▸\ ,eol:¬

" reduce updatetime for prompt git gutter
set updatetime=250

" C-D to close window like it does a shell in tmux
nnoremap <silent> <C-d> :q<CR>

" fzf mappings
nnoremap <silent> <leader>o :Files<CR>
nnoremap <silent> <leader>O :Files!<CR>
cnoremap <silent> <C-p> :History:<CR>
cnoremap <silent> <C-_> <ESC>:History/<CR>
nnoremap <silent> <leader>b :Buffers<CR>
nnoremap <silent> <leader>` :Marks<CR>
nnoremap <silent> <leader>L :BLines<CR>
nnoremap <silent> <F1> :Helptags<CR>
inoremap <silent> <F1> <ESC>:Helptags<CR>
noremap <silent> <leader>; :Commands<CR>
inoremap <silent> <F3> <ESC>:Snippets<CR>
